<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>ngUpload by twilson63</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">ngUpload</h1>
      <h2 class="project-tagline">An AngularJS Service for uploading files using iframe</h2>
      <a href="https://github.com/twilson63/ngUpload" class="btn">View on GitHub</a>
      <a href="https://github.com/twilson63/ngUpload/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/twilson63/ngUpload/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="ngupload" class="anchor" href="#ngupload" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ngUpload</h1>

<p>An AngularJS file upload directive.  </p>

<h2>
<a id="055---for-updates-see-changelogmd" class="anchor" href="#055---for-updates-see-changelogmd" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>0.5.5 - for updates see CHANGELOG.md</h2>

<div class="highlight highlight-text-html-basic"><pre>   &lt;<span class="pl-ent">form</span> <span class="pl-e">ng-upload</span>=<span class="pl-s"><span class="pl-pds">"</span>uploadComplete(content)<span class="pl-pds">"</span></span> <span class="pl-e">action</span>=<span class="pl-s"><span class="pl-pds">"</span>/upload-full-form<span class="pl-pds">"</span></span>&gt;
       &lt;<span class="pl-ent">p</span>&gt;
           &lt;<span class="pl-ent">label</span>&gt;Fullname:&lt;/<span class="pl-ent">label</span>&gt;
           &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>fullname<span class="pl-pds">"</span></span> <span class="pl-e">ng-model</span>=<span class="pl-s"><span class="pl-pds">"</span>fullname<span class="pl-pds">"</span></span> /&gt;
       &lt;/<span class="pl-ent">p</span>&gt;
       &lt;<span class="pl-ent">p</span>&gt;
           &lt;<span class="pl-ent">label</span>&gt;Gender:&lt;/<span class="pl-ent">label</span>&gt;
           &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>gender<span class="pl-pds">"</span></span> <span class="pl-e">ng-model</span>=<span class="pl-s"><span class="pl-pds">"</span>gender<span class="pl-pds">"</span></span> /&gt;
       &lt;/<span class="pl-ent">p</span>&gt;
       &lt;<span class="pl-ent">p</span>&gt;
           &lt;<span class="pl-ent">label</span>&gt;Favorite Color:&lt;/<span class="pl-ent">label</span>&gt;
           &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>color<span class="pl-pds">"</span></span> <span class="pl-e">ng-model</span>=<span class="pl-s"><span class="pl-pds">"</span>color<span class="pl-pds">"</span></span>/&gt;
       &lt;/<span class="pl-ent">p</span>&gt;
       &lt;<span class="pl-ent">p</span>&gt;
           &lt;<span class="pl-ent">label</span>&gt;Your picture (file will not be saved on the server):&lt;/<span class="pl-ent">label</span>&gt;
           &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span> /&gt;
       &lt;/<span class="pl-ent">p</span>&gt;
       &lt;<span class="pl-ent">p</span>&gt;
           &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>submit<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>btn<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Submit<span class="pl-pds">"</span></span> <span class="pl-e">ng-disabled</span>=<span class="pl-s"><span class="pl-pds">"</span>$isLoading<span class="pl-pds">"</span></span>  /&gt;
       &lt;/<span class="pl-ent">p</span>&gt;
   &lt;/<span class="pl-ent">form</span>&gt;
   &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>alert alert-info<span class="pl-pds">"</span></span>&gt;Server Response: {{response | json}}&lt;/<span class="pl-ent">div</span>&gt;
   &lt;<span class="pl-ent">div</span>&gt;
       Fullname: &lt;<span class="pl-ent">b</span>&gt;{{response.fullname}}&lt;/<span class="pl-ent">b</span>&gt;&lt;<span class="pl-ent">br</span> /&gt;
       Gender: &lt;<span class="pl-ent">b</span>&gt;{{response.gender}}&lt;/<span class="pl-ent">b</span>&gt;&lt;<span class="pl-ent">br</span> /&gt;
       Favourite Color: &lt;<span class="pl-ent">span</span> <span class="pl-e">ng-style</span>=<span class="pl-s"><span class="pl-pds">"</span>response.style<span class="pl-pds">"</span></span>&gt;{{response.color}}&lt;/<span class="pl-ent">span</span>&gt;&lt;<span class="pl-ent">br</span> /&gt;
       Picture: {{response.pictureUrl}}
   &lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>... and the context ngController's source is:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">app</span>.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">'</span>Example5Ctrl<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>) {
  <span class="pl-c1">$scope</span>.<span class="pl-en">uploadComplete</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">content</span>) {
    <span class="pl-smi">$scope</span>.<span class="pl-smi">response</span> <span class="pl-k">=</span> <span class="pl-smi">JSON</span>.<span class="pl-c1">parse</span>(content); <span class="pl-c">// Presumed content is a json string!</span>
    <span class="pl-smi">$scope</span>.<span class="pl-smi">response</span>.<span class="pl-c1">style</span> <span class="pl-k">=</span> {
      color<span class="pl-k">:</span> <span class="pl-smi">$scope</span>.<span class="pl-smi">response</span>.<span class="pl-c1">color</span>,
      <span class="pl-s"><span class="pl-pds">"</span>font-weight<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>bold<span class="pl-pds">"</span></span>
    };

    <span class="pl-c">// Clear form (reason for using the 'ng-model' directive on the input elements)</span>
    <span class="pl-smi">$scope</span>.<span class="pl-smi">fullname</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
    <span class="pl-smi">$scope</span>.<span class="pl-smi">gender</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
    <span class="pl-smi">$scope</span>.<span class="pl-c1">color</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
    <span class="pl-c">// Look for way to clear the input[type=file] element</span>
  };
});</pre></div>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>AngularJS (<a href="http://angularjs.org">http://angularjs.org</a>)</li>
</ul>

<h2>
<a id="install-with-bower" class="anchor" href="#install-with-bower" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install with Bower</h2>

<pre><code>bower install ngUpload 
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Add to your html file</p>

<pre><code>&lt;script src="/js/ng-upload.js"&gt;&lt;/script&gt;
</code></pre>

<p>Create a basic form with a file input element</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>mainCtrl<span class="pl-pds">"</span></span>&gt;
   &lt;<span class="pl-ent">form</span> <span class="pl-e">action</span>=<span class="pl-s"><span class="pl-pds">"</span>/uploads<span class="pl-pds">"</span></span> <span class="pl-e">ng-upload</span>=<span class="pl-s"><span class="pl-pds">"</span>complete(content)<span class="pl-pds">"</span></span>&gt; 
     &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>avatar<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">input</span>&gt;
     &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>submit<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Upload<span class="pl-pds">"</span></span> <span class="pl-e">ng-disabled</span>=<span class="pl-s"><span class="pl-pds">"</span>$isLoading<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">input</span>&gt;
   &lt;/<span class="pl-ent">form</span>&gt;
 &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<h3>
<a id="some-rule-of-thumb" class="anchor" href="#some-rule-of-thumb" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Some rule of thumb</h3>

<ul>
<li>Any html element that supports the click event can be used to submit the form marked with the <strong>ng-upload</strong> directive, as long as such elements are marked with the <strong>'upload-submit'</strong> directive.  If you use an input element with a type of submit then you do not have to mark it with upload-submit.</li>
<li>Make sure you import the <strong>'ngUpload'</strong> module in your angularJS application.</li>
</ul>

<p>Applying this rules, the sample above can be re-written as</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>mainCtrl<span class="pl-pds">"</span></span>&gt;
   &lt;<span class="pl-ent">form</span> <span class="pl-e">action</span>=<span class="pl-s"><span class="pl-pds">"</span>/uploads<span class="pl-pds">"</span></span> <span class="pl-e">ng-upload</span>=<span class="pl-s"><span class="pl-pds">"</span>completed(content)<span class="pl-pds">"</span></span>&gt; 
     &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>avatar<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">input</span>&gt;
     &lt;<span class="pl-ent">div</span> <span class="pl-e">style</span>=<span class="pl-s"><span class="pl-pds">'</span>cursor: pointer<span class="pl-pds">'</span></span> <span class="pl-e">upload-submit</span>&gt;Upload with Div&lt;/<span class="pl-ent">div</span>&gt; <span class="pl-c1">&amp;bull;</span>
   &lt;/<span class="pl-ent">form</span>&gt;
 &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>or</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>mainCtrl<span class="pl-pds">"</span></span>&gt;
   &lt;<span class="pl-ent">form</span> <span class="pl-e">action</span>=<span class="pl-s"><span class="pl-pds">"</span>/uploads<span class="pl-pds">"</span></span> <span class="pl-e">ng-upload</span>=<span class="pl-s"><span class="pl-pds">"</span>complete(contents)<span class="pl-pds">"</span></span>&gt; 
     &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>avatar<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">input</span>&gt;
     &lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">'</span>javascript:void(0)<span class="pl-pds">'</span></span> 
       <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>upload-submit<span class="pl-pds">"</span></span> &gt;
         Upload with Anchor&lt;/<span class="pl-ent">a</span>&gt;
   &lt;/<span class="pl-ent">form</span>&gt;
 &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>where the form can be submit with a Div or Anchor html element.</p>

<p>The AngularJS controller for the above samples is given as:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>ngUpload<span class="pl-pds">'</span></span>])
  .<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">'</span>mainCtrl<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">$scope</span>) {
    <span class="pl-c1">$scope</span>.<span class="pl-en">complete</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">content</span>) {
      <span class="pl-en">console</span>.<span class="pl-c1">log</span>(content); <span class="pl-c">// process content</span>
    }
});</pre></div>

<ul>
<li>Working in IE</li>
</ul>

<p>In order, for ngUpload to respond correctly for IE, your server needs to return the response back as <code>html/text</code> not <code>application/json</code></p>

<h2>
<a id="directive-options" class="anchor" href="#directive-options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Directive Options</h2>

<h3>
<a id="ngupload-1" class="anchor" href="#ngupload-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ngUpload</h3>

<ul>
<li><p><code>upload-options-enable-rails-csrf</code>: Turns on support for <a href="http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf">Rails' CSRF</a> 
                           by adding a hidden form field with the csrf token.</p></li>
<li><p><code>upload-before-submit</code>: function that gets triggered before the upload starts and if the function returns false it will cancel the submit.</p></li>
</ul>

<h3>
<a id="uploadsubmit" class="anchor" href="#uploadsubmit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>uploadSubmit</h3>

<ul>
<li>
<code>upload-options-convert-hidden</code>: Set the value of hidden inputs to their <code>ng-model</code> attribute when the form is submitted.</li>
</ul>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<p>Example of forms that posts to NodeJS server are now included under the <a href="https://github.com/twilson63/ngUpload/tree/master/examples">/examples</a> folder.</p>

<h2>
<a id="test" class="anchor" href="#test" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test</h2>

<p>Needs Chrome Installed.</p>

<div class="highlight highlight-source-shell"><pre>npm install
npm install grunt-cli -g

npm <span class="pl-c1">test</span></pre></div>

<h2>
<a id="jshint" class="anchor" href="#jshint" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>jshint</h2>

<div class="highlight highlight-source-shell"><pre>npm install
npm install grunt-cli -g

grunt jshint</pre></div>

<h2>
<a id="minify" class="anchor" href="#minify" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Minify</h2>

<div class="highlight highlight-source-shell"><pre>npm install
npm install grunt-cli -g

grunt uglify</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>MIT</p>

<h2>
<a id="how-to-contribute" class="anchor" href="#how-to-contribute" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to contribute</h2>

<p>pull requests welcome.</p>

<p>please use the following style guidelines</p>

<p>(<a href="http://nodeguide.com/style.html">http://nodeguide.com/style.html</a>)</p>

<h2>
<a id="contributors" class="anchor" href="#contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributors</h2>

<ul>
<li>ADEBISI Foluso A. (<a href="https://github.com/adebisi-fa">https://github.com/adebisi-fa</a>)</li>
<li>Hassan Alqaraguli (<a href="https://github.com/HassanAlqaraguli">https://github.com/HassanAlqaraguli</a>)</li>
<li>Jørgen Borgesen (<a href="https://github.com/jorgenfb">https://github.com/jorgenfb</a>)</li>
<li>cristianocd (<a href="https://github.com/cristianocd">https://github.com/cristianocd</a>)</li>
<li>Evgeniy Zatsepin (<a href="https://github.com/dizzy7">https://github.com/dizzy7</a>)</li>
<li>Chris Tesene (<a href="https://github.com/ctesene">https://github.com/ctesene</a>)</li>
<li>denyo (<a href="https://github.com/denyo">https://github.com/denyo</a>)</li>
<li>mguymon (<a href="https://github.com/mguymon">https://github.com/mguymon</a>)</li>
<li>marek-stoj (<a href="https://github.com/marek-stoj">https://github.com/marek-stoj</a>)</li>
<li>Robert Coker (<a href="https://github.com/intelekshual">https://github.com/intelekshual</a>)</li>
<li>Michael Guymon (<a href="https://github.com/mguymon">https://github.com/mguymon</a>)</li>
</ul>

<h2>
<a id="thanks" class="anchor" href="#thanks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thanks</h2>

<ul>
<li>AngularJS Team</li>
<li>NodeJS Team</li>
<li>JavaScript Team</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/twilson63/ngUpload">ngUpload</a> is maintained by <a href="https://github.com/twilson63">twilson63</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
