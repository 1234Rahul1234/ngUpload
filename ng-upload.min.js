angular.module("ngUpload",[]).directive("ngUpload",function(){return{restrict:"A",link:function(t,a,n){var o={};if(o.enableControls=n.uploadOptionsEnableControls,n.ngUpload){a.attr("target","upload_iframe"),a.attr("method","post"),a.attr("action",a.attr("action")+"?_t="+(new Date).getTime()),a.attr("enctype","multipart/form-data"),a.attr("encoding","multipart/form-data");var e=n.ngUpload.split("(")[0],i=t.$eval(e);if(!angular.isFunction(i)){var l="The expression on the ngUpload directive does not point to a valid function.";throw l+"\n"}var r=function(n){var o=$("<iframe id='upload_iframe' name='upload_iframe' border='0' width='0' height='0' style='width: 0px; height: 0px; border: none; display: none' />");o.bind("load",function(){var a=o.contents().find("body").text();t.$apply(function(){i(a,""!==a)}),""!==a&&setTimeout(function(){o.remove()},250),n.attr("disabled",null),n.attr("title","Click to start upload.")}),a.parent().append(o)};$(".upload-submit",a).click(function(){r($(this)),t.$apply(function(){i("Please wait...",!1)});var n=!0;(null===o.enableControls||void 0===o.enableControls||o.enableControls.length>=0)&&($(this).attr("disabled","disabled"),n=!1),$(this).attr("title",(n?"[ENABLED]: ":"[DISABLED]: ")+"Uploading, please wait..."),$(a).submit()}).attr("title","Click to start upload.")}else console.log("No callback function found on the ngUpload directive.")}}});